<!--Running in Production mode, so we want fewer compressed scripts to download-->

<script src="/{{=request.application}}/static/scripts/web2py/jquery-1.3.2.min.js" type="text/javascript"></script>
<!-- For Sites Hosted on the Public Internet, using Google's version of jQuery will provide better performance
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
-->

<!--This script is created by /static/scripts/tools/build.sahana.py-->
<script src="/{{=request.application}}/static/scripts/S3/S3.min.js" type="text/javascript"></script>

<!--Scripts which need pre-processing by server must be called in-line-->
  
<!--Web2Py Layer-->
<script type="text/javascript">//<![CDATA[
$(document).ready(function() {
    $('input.delete').attr('onclick','if(this.checked) if(!confirm("{{=T('Sure you want to delete this object?')}}")) this.checked=false;');
    try {$("input.date").focus( function() {Calendar.setup({
         inputField:this.id, ifFormat:"{{=T('%Y-%m-%d')}}", showsTime:false
    }); }); } catch(e) {};
    try { $("input.datetime").focus( function() {Calendar.setup({
         inputField:this.id, ifFormat:"{{=T('%Y-%m-%d %H:%M:%S')}}", showsTime: true,timeFormat: "24"
    }); }); } catch(e) {};
    try { $("input.time").clockpick({
         starthour:0, endhour:23, showminutes:true, military:true
    }); } catch(e) {};
});
//]]></script>

<!--T2 Layer-->
<script type="text/javascript">//<![CDATA[
$(document).ready(function(){
    try { $('.zoom').fancyZoom({scaleImg:true, closeOnClick:true, directory:"/{{=request.application}}/static/media"}); } catch(e) {};
});
//]]></script>

<!--S3 Layer-->
<script type="text/javascript">//<![CDATA[
function make_delete_row() {
    $(document).ready(function() {
    $('input.delete_row').click(function(){
        if(confirm("{{=T("Sure you want to delete this object?")}}")) {
          $.ajax({ url: "{{=URL2(r=request)}}/"+$(this).attr("name")+"/delete/"+$(this).attr("id")+"?format=ajax",  cache: false,  success: function(html){ $("div#list-container").html(html); make_delete_row(); }});
        }
        return false;
    });
  });
}
make_delete_row();

$(document).ready(function() {
    $('a.smopen, a.smclose').click(function(){
        $(this).toggleClass('smopen');
        $(this).toggleClass('smclose');
        if ($(this).next().css('display') == 'block') {
            $(this).next().css('display','none');
            $.ajax({url: "{{=URL(r=request,c='default',f='menu_open')}}",data: "module_name={{=module_name}}&option_name=",cache: false});
        } else {
            $(this).next().css('display','block');
            $.ajax({url: "{{=URL(r=request,c='default',f='menu_open')}}",data: "module_name={{=module_name}}&option_name="+$(this).attr('title'),cache: false,});
        }
        return false;
    });
    $('a#delete-btn').click(function(event){ if(confirm("{{=T("Sure you want to delete this object?")}}"))
        { event.default(); } else { event.preventDefault(); }
        return false; });
    $('.tooltip').cluetip({activation: 'click', sticky: true, closePosition: 'title',closeText: '<img src="/{{=request.application}}/static/img/cross2.png" alt="close" />',splitTitle: '|'});
    $('a.popup').cluetip({activation: 'click', sticky: true, width: '360px', closePosition: 'title',closeText: '<img src="/{{=request.application}}/static/img/cross2.png" alt="close" />'});
});
//]]></script>
