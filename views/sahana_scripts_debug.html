<!--Running in Debug mode, so we want each script to download separately & to use the uncompressed versions-->

<!--Web2Py Layer-->
<script src="/{{=request.application}}/static/scripts/web2py/jquery-1.4.2.js" type="text/javascript"></script>
<script src="/{{=request.application}}/static/scripts/web2py/calendar.js" type="text/javascript" charset="utf-8"></script>
<!-- These 2 are included in the 1 above, but so is other stuff :/
<script src="/{{=request.application}}/static/scripts/web2py/calendar-1.0.js" type="text/javascript" charset="utf-8"></script>
<script src="/{{=request.application}}/static/scripts/web2py/jquery.clockpick.1.2.4.js" type="text/javascript" charset="utf-8"></script>
-->
<script src="/{{=request.application}}/static/scripts/web2py/web2py.js" type="text/javascript" charset="utf-8"></script>
<!--Scripts which need pre-processing by server must be called in-line-->
<script type="text/javascript">//<![CDATA[
jQuery(document).ready(function() {
    jQuery("input[type='checkbox'].delete").click(function() { if(this.checked) if(!confirm("{{=T('Sure you want to delete this object?')}}")) this.checked=false; }); 
    //try {jQuery("input.date").focus( function() {Calendar.setup({
    //     inputField:this.id, ifFormat:"{{=T('%Y-%m-%d')}}", showsTime:false
    //}); }); } catch(e) {};
    try { jQuery("input.datetime").focus( function() {Calendar.setup({
         inputField:this.id, ifFormat:"{{=T('%Y-%m-%d %H:%M')}}", showsTime: true,timeFormat: "24"
    }); }); } catch(e) {};
});
//]]></script>

<!--T2 Layer-->
<script src="/{{=request.application}}/static/scripts/T2/fancyzoom.min.js" type="text/javascript" charset="utf-8"></script>
<!--
<script src="/{{=request.application}}/static/scripts/T2/rating.js" type="text/javascript" charset="utf-8"></script>
-->
<!--Scripts which need pre-processing by server must be called in-line-->
<script type="text/javascript">//<![CDATA[
jQuery(document).ready(function(){
    try { jQuery('.zoom').fancyZoom({scaleImg:true, closeOnClick:true, directory:"/{{=request.application}}/static/media"}); } catch(e) {};
});
//]]></script>

<!--S3 Layer-->
<script src="/{{=request.application}}/static/scripts/S3/labels.js" type="text/javascript" charset="utf-8"></script>
<script src="/{{=request.application}}/static/scripts/S3/jquery.autocomplete.js" type="text/javascript" charset="utf-8"></script>
<script src="/{{=request.application}}/static/scripts/S3/jquery.cluetip.js" type="text/javascript" charset="utf-8"></script>
<script src="/{{=request.application}}/static/scripts/S3/jquery.ui.core.js" type="text/javascript" charset="utf-8"></script>
<script src="/{{=request.application}}/static/scripts/S3/jquery.ui.datepicker.js" type="text/javascript" charset="utf-8"></script>
<script src="/{{=request.application}}/static/scripts/S3/jquery.validate.js" type="text/javascript" charset="utf-8"></script>
<script src="/{{=request.application}}/static/scripts/S3/S3.js" type="text/javascript" charset="utf-8"></script>
<script src="/{{=request.application}}/static/scripts/S3/s3.auto.widget.js" type="text/javascript" charset="utf-8"></script>
<script src="/{{=request.application}}/static/scripts/S3/s3.multiselect.widget.js" type="text/javascript" charset="utf-8"></script>
<script src="/{{=request.application}}/static/scripts/S3/s3.checkboxes.widget.js" type="text/javascript" charset="utf-8"></script>
<!--Scripts which need pre-processing by server must be called in-line-->
<script type="text/javascript">//<![CDATA[

{{include 'ajaxS3messages.js'}}

function viewMap(feature_id) {
    var url = '{{=URL(r=request, c='gis', f='display_feature')}}/' + feature_id;
    var iframe = "<iframe width='810' height='610' src='" + url + "'></iframe>";
    if (jQuery.support.scriptEval==true) {
        // Firefox, Chrome
        // ToDo: catch Chrome somehow as it prefers the IE method
        $.get(url, function(data){
            // Hack from http://stackoverflow.com/questions/1197575/can-scripts-be-inserted-with-innerhtml
            var n = document.createElement("div");
            n.innerHTML = data;
            document.body.appendChild(n);
        });
    } else {
        // IE
        //$.getScript() will be too complex to engineer
        $('#map').html(iframe);
    }
}
function viewMapMulti(module, resource, instance, jresource) {
    var url = '{{=URL(r=request, c='gis', f='display_features')}}/?module=' + module + '&resource=' + resource + '&instance=' + instance + '&jresource=' + jresource;
    var iframe = "<iframe width='810' height='610' src='" + url + "'></iframe>";
    if (jQuery.support.scriptEval==true) {
        // Firefox, Chrome
        // ToDo: catch Chrome somehow as it prefers the IE method
        $.get(url, function(data){
            // Hack from http://stackoverflow.com/questions/1197575/can-scripts-be-inserted-with-innerhtml
            var n = document.createElement("div");
            n.innerHTML = data;
            document.body.appendChild(n);
        });
    } else {
        // IE
        //$.getScript() will be too complex to engineer
        $('#map').html(iframe);
    }
}
jQuery(document).ready(function() {
    jQuery("input.date").datepicker({ changeMonth: true, changeYear: true, dateFormat: 'yy-mm-dd', isRTL: false });
    jQuery('a#delete-btn').click(function(event){ if(confirm("{{=T("Sure you want to delete this object?")}}")) {
            return true;
        } else {
            event.preventDefault();
            return false;
        }
    });
    jQuery('.tooltip').cluetip({activation: 'click', sticky: true, closePosition: 'title',closeText: '<img src="/{{=request.application}}/static/img/cross2.png" alt="close" />',splitTitle: '|'});
    jQuery('.ajaxtip').cluetip({activation: 'click', sticky: true, closePosition: 'title',closeText: '<img src="/{{=request.application}}/static/img/cross2.png" alt="close" />',width: 380});
});
//]]></script>
